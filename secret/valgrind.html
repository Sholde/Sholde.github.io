<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-05-17 lun. 19:47 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>valgrind</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Sholde" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style>html {background-color: #000000; color: #e5e5e5;}</style>
<style>body {background-color: #101010; margin: 100px;}</style>
<style>div#content {padding: 10px; border: 1px solid white;}</style>
<style>div#table-of-contents {background-color: #202020; margin: 20px; padding: 10px; border: 1px solid white;}</style>
<style>div.outline-2 {background-color: #202020; margin: 20px; padding: 10px; border: 1px solid white;}</style>
<style>h2 {border-bottom: 1px solid white;}</style>
<style>h3 {border-bottom: 1px solid white;}</style>
<style>a {text-decoration:none; color: #e5e5e5;}</style>
<style>li {list-style-type: none;}</style>
<style>a:hover {color: #00ff00; padding-left: 10px;}</style>
<style>div#org-src-container {background-color: #303030; box-shadow: none;}</style>
<style>pre:hover {border: 2px solid green;}</style>
<style>pre {background-color: #303030; border: 2px solid white; box-shadow: none;}</style>
<style>pre.src {background-color: #303030; color: #e5e5e5;}</style>
<style>pre.src:before {color: #000000;}</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">valgrind</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga57439b">1. Introduction</a></li>
<li><a href="#orgdfcfd19">2. Usage</a></li>
<li><a href="#org19fce79">3. Code sample</a></li>
<li><a href="#org4b91c0b">4. Memcheck</a></li>
<li><a href="#org592ca3e">5. Cachegrind</a></li>
<li><a href="#orge303dcc">6. Massif</a></li>
<li><a href="#orge0cbe9c">7. Callgrind</a></li>
</ul>
</div>
</div>

<div id="outline-container-orga57439b" class="outline-2">
<h2 id="orga57439b"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
<b>valgrind</b> is a compilation of many tools. By <b>default</b> the module <b>Memcheck</b>
 is choosen.
</p>
</div>
</div>

<div id="outline-container-orgdfcfd19" class="outline-2">
<h2 id="orgdfcfd19"><span class="section-number-2">2</span> Usage</h2>
<div class="outline-text-2" id="text-2">
<p>
Compile your program and then run it with valgrind and the tool to use.
</p>

<div class="org-src-container">
<pre class="src src-shell">$ gcc prog.c -o prog
$ valgrind --tool=[TOOL NAME] ./prog
</pre>
</div>
</div>
</div>

<div id="outline-container-org19fce79" class="outline-2">
<h2 id="org19fce79"><span class="section-number-2">3</span> Code sample</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-c"><span style="color: #aeee00;">#include</span> <span style="color: #f4cf86;">&lt;stdio.h&gt;</span>
<span style="color: #aeee00;">#include</span> <span style="color: #f4cf86;">&lt;stdlib.h&gt;</span>

<span style="color: #ff9eb8;">int</span> <span style="color: #ffa724;">func</span>(<span style="color: #ff9eb8;">int</span> *<span style="color: #ffa724;">a</span>)
{
  a[5] = 1;

  <span style="color: #ff9eb8;">int</span> <span style="color: #ffa724;">b</span>;
  <span style="color: #ff2c4b; font-weight: bold;">if</span> (b)
    printf(<span style="color: #f4cf86;">"lol\n"</span>);
}

<span style="color: #ff9eb8;">int</span> <span style="color: #ffa724;">main</span>()
{
  <span style="color: #ff9eb8;">int</span> *<span style="color: #ffa724;">a</span> = malloc(<span style="color: #ff2c4b; font-weight: bold;">sizeof</span>(<span style="color: #ff9eb8;">int</span>) * 5);
  func(a);
  <span style="color: #ff2c4b; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4b91c0b" class="outline-2">
<h2 id="org4b91c0b"><span class="section-number-2">4</span> Memcheck</h2>
<div class="outline-text-2" id="text-4">
<p>
This tool check memory problem like not allcated or not released memory.
</p>

<div class="org-src-container">
<pre class="src src-shell">$ valgrind --tool=memcheck ./val 
==<span style="color: #ffa724;">2422</span>== Memcheck, a memory error detector
==<span style="color: #ffa724;">2422</span>== Copyright (C) 2002-2017, and GNU GPL<span style="color: #f4cf86;">'d, by Julian Seward et al.</span>
<span style="color: #f4cf86;">==2422== Using Valgrind-3.16.1 and LibVEX; rerun with -h for copyright info</span>
<span style="color: #f4cf86;">==2422== Command: ./val</span>
<span style="color: #f4cf86;">==2422== </span>
<span style="color: #f4cf86;">==2422== Invalid write of size 4</span>
<span style="color: #f4cf86;">==2422==    at 0x109149: func (val.c:5)</span>
<span style="color: #f4cf86;">==2422==    by 0x109173: main (val.c:11)</span>
<span style="color: #f4cf86;">==2422==  Address 0x4a50054 is 0 bytes after a block of size 20 alloc'</span>d
==<span style="color: #ffa724;">2422</span>==    at 0x483E77F: malloc (vg_replace_malloc.c:307)
==<span style="color: #ffa724;">2422</span>==    by 0x109163: main (val.c:10)
==<span style="color: #ffa724;">2422</span>== 
==<span style="color: #ffa724;">2422</span>== 
==<span style="color: #ffa724;">2422</span>== HEAP SUMMARY:
==<span style="color: #ffa724;">2422</span>==    <span style="color: #ff2c4b; font-weight: bold;"> in</span> use at exit: 20 bytes<span style="color: #ff2c4b; font-weight: bold;"> in</span> 1 blocks
==<span style="color: #ffa724;">2422</span>==   total heap usage: 1 allocs, 0 frees, 20 bytes allocated
==<span style="color: #ffa724;">2422</span>== 
==<span style="color: #ffa724;">2422</span>== LEAK SUMMARY:
==<span style="color: #ffa724;">2422</span>==    definitely lost: 20 bytes<span style="color: #ff2c4b; font-weight: bold;"> in</span> 1 blocks
==<span style="color: #ffa724;">2422</span>==    indirectly lost: 0 bytes<span style="color: #ff2c4b; font-weight: bold;"> in</span> 0 blocks
==<span style="color: #ffa724;">2422</span>==      possibly lost: 0 bytes<span style="color: #ff2c4b; font-weight: bold;"> in</span> 0 blocks
==<span style="color: #ffa724;">2422</span>==    still reachable: 0 bytes<span style="color: #ff2c4b; font-weight: bold;"> in</span> 0 blocks
==<span style="color: #ffa724;">2422</span>==         suppressed: 0 bytes<span style="color: #ff2c4b; font-weight: bold;"> in</span> 0 blocks
==<span style="color: #ffa724;">2422</span>== Rerun with --leak-check=full to see details of leaked memory
==<span style="color: #ffa724;">2422</span>== 
==<span style="color: #ffa724;">2422</span>== For lists of detected and suppressed errors, rerun with: -s
</pre>
</div>

<ul class="org-ul">
<li>We have an access to unallocated memory at line 5 of code.</li>
<li>We never free the malloc</li>
</ul>
</div>
</div>

<div id="outline-container-org592ca3e" class="outline-2">
<h2 id="org592ca3e"><span class="section-number-2">5</span> Cachegrind</h2>
<div class="outline-text-2" id="text-5">
<p>
This tool check the cache miss.
</p>

<div class="org-src-container">
<pre class="src src-shell">$ valgrind --tool=cachegrind ./val 
==<span style="color: #ffa724;">5486</span>== Cachegrind, a cache and branch-prediction profiler
==<span style="color: #ffa724;">5486</span>== Copyright (C) 2002-2017, and GNU GPL<span style="color: #f4cf86;">'d, by Nicholas Nethercote et al.</span>
<span style="color: #f4cf86;">==5486== Using Valgrind-3.16.1 and LibVEX; rerun with -h for copyright info</span>
<span style="color: #f4cf86;">==5486== Command: ./val</span>
<span style="color: #f4cf86;">==5486== </span>
<span style="color: #f4cf86;">--5486-- warning: L3 cache found, using its data for the LL simulation.</span>
<span style="color: #f4cf86;">--5486-- warning: specified LL cache: line_size 64  assoc 12  total_size 9,437,184</span>
<span style="color: #f4cf86;">--5486-- warning: simulated LL cache: line_size 64  assoc 18  total_size 9,437,184</span>
<span style="color: #f4cf86;">==5486== </span>
<span style="color: #f4cf86;">==5486== I   refs:      146,806</span>
<span style="color: #f4cf86;">==5486== I1  misses:        991</span>
<span style="color: #f4cf86;">==5486== LLi misses:        980</span>
<span style="color: #f4cf86;">==5486== I1  miss rate:    0.68%</span>
<span style="color: #f4cf86;">==5486== LLi miss rate:    0.67%</span>
<span style="color: #f4cf86;">==5486== </span>
<span style="color: #f4cf86;">==5486== D   refs:       47,669  (34,242 rd   + 13,427 wr)</span>
<span style="color: #f4cf86;">==5486== D1  misses:      2,019  ( 1,424 rd   +    595 wr)</span>
<span style="color: #f4cf86;">==5486== LLd misses:      1,786  ( 1,223 rd   +    563 wr)</span>
<span style="color: #f4cf86;">==5486== D1  miss rate:     4.2% (   4.2%     +    4.4%  )</span>
<span style="color: #f4cf86;">==5486== LLd miss rate:     3.7% (   3.6%     +    4.2%  )</span>
<span style="color: #f4cf86;">==5486== </span>
<span style="color: #f4cf86;">==5486== LL refs:         3,010  ( 2,415 rd   +    595 wr)</span>
<span style="color: #f4cf86;">==5486== LL misses:       2,766  ( 2,203 rd   +    563 wr)</span>
<span style="color: #f4cf86;">==5486== LL miss rate:      1.4% (   1.2%     +    4.2%  )</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">$ cg_annotate cachegrind.out.5486 
--------------------------------------------------------------------------------
I1 cache:         32768 B, 64 B, 8-way associative
D1 cache:         32768 B, 64 B, 8-way associative
LL cache:         9437184 B, 64 B, 18-way associative
Command:          ./val
Data file:        cachegrind.out.5486
Events recorded:  Ir I1mr ILmr Dr D1mr DLmr Dw D1mw DLmw
Events shown:     Ir I1mr ILmr Dr D1mr DLmr Dw D1mw DLmw
Event sort order: Ir I1mr ILmr Dr D1mr DLmr Dw D1mw DLmw
Thresholds:       0.1 100 100 100 100 100 100 100 100
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir               I1mr           ILmr           Dr              D1mr           DLmr           Dw              D1mw         DLmw         
--------------------------------------------------------------------------------
148,253 (100.0%) 1,060 (100.0%) 1,044 (100.0%) 34,737 (100.0%) 1,436 (100.0%) 1,228 (100.0%) 13,723 (100.0%) 598 (100.0%) 566 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir              I1mr        ILmr        Dr             D1mr         DLmr         Dw             D1mw         DLmw          file:<span style="color: #ff2c4b; font-weight: bold;">function</span>
--------------------------------------------------------------------------------
29,809 (20.11%) 50 ( 4.72%) 50 ( 4.79%) 7,335 (21.12%) 693 (48.26%) 641 (52.20%) 2,583 (18.82%) 255 (42.64%) 241 (42.58%)  ???:_dl_relocate_object
28,307 (19.09%)  7 ( 0.66%)  7 ( 0.67%) 5,392 (15.52%)  57 ( 3.97%)  57 ( 4.64%)     6 ( 0.04%)   1 ( 0.17%)   1 ( 0.18%)  ???:__GI___tunables_init
25,828 (17.42%) 16 ( 1.51%) 16 ( 1.53%) 8,335 (23.99%) 176 (12.26%) 142 (11.56%) 4,193 (30.55%)   4 ( 0.67%)   4 ( 0.71%)  ???:do_lookup_x
21,433 (14.46%) 10 ( 0.94%) 10 ( 0.96%) 4,595 (13.23%) 101 ( 7.03%)  95 ( 7.74%) 2,311 (16.84%)   4 ( 0.67%)   0           ???:_dl_lookup_symbol_x
 7,019 ( 4.73%) 37 ( 3.49%) 37 ( 3.54%) 1,195 ( 3.44%)  33 ( 2.30%)  22 ( 1.79%)     0            0            0           ???:strcmp
 5,365 ( 3.62%)  8 ( 0.75%)  8 ( 0.77%) 1,785 ( 5.14%)  41 ( 2.86%)  29 ( 2.36%)   606 ( 4.42%)   1 ( 0.17%)   1 ( 0.18%)  ???:check_match
 5,142 ( 3.47%)  9 ( 0.85%)  9 ( 0.86%)   460 ( 1.32%)   7 ( 0.49%)   7 ( 0.57%)    72 ( 0.52%)   0            0           ???:intel_check_word.constprop.0
 2,508 ( 1.69%) 60 ( 5.66%) 60 ( 5.75%)   566 ( 1.63%)  42 ( 2.92%)  42 ( 3.42%)   243 ( 1.77%)  23 ( 3.85%)  23 ( 4.06%)  ???:_dl_map_object_from_fd
 1,683 ( 1.14%) 19 ( 1.79%) 19 ( 1.82%)   560 ( 1.61%)  25 ( 1.74%)  24 ( 1.95%)   222 ( 1.62%)  19 ( 3.18%)  18 ( 3.18%)  ???:_dl_check_map_versions
 1,563 ( 1.05%) 92 ( 8.68%) 91 ( 8.72%)   387 ( 1.11%)  43 ( 2.99%)  28 ( 2.28%)   170 ( 1.24%)  17 ( 2.84%)  17 ( 3.00%)  ???:dl_main
   958 ( 0.65%) 34 ( 3.21%) 34 ( 3.26%)   195 ( 0.56%)   1 ( 0.07%)   1 ( 0.08%)   104 ( 0.76%)   8 ( 1.34%)   8 ( 1.41%)  ???:_dl_map_object_deps
   916 ( 0.62%)  3 ( 0.28%)  3 ( 0.29%)   144 ( 0.41%)  12 ( 0.84%)  12 ( 0.98%)     0            0            0           ???:_dl_cache_libcmp
   713 ( 0.48%)  7 ( 0.66%)  7 ( 0.67%)     9 ( 0.03%)   2 ( 0.14%)   1 ( 0.08%)   274 ( 2.00%)  35 ( 5.85%)  34 ( 6.01%)  ???:ptmalloc_init.part.0
   712 ( 0.48%) 32 ( 3.02%) 32 ( 3.07%)   130 ( 0.37%)   0            0            123 ( 0.90%)   5 ( 0.84%)   5 ( 0.88%)  ???:_dl_important_hwcaps
   669 ( 0.45%) 14 ( 1.32%) 14 ( 1.34%)   113 ( 0.33%)   4 ( 0.28%)   4 ( 0.33%)   117 ( 0.85%)  24 ( 4.01%)  24 ( 4.24%)  ???:_dl_new_object
   628 ( 0.42%) 20 ( 1.89%) 18 ( 1.72%)   131 ( 0.38%)  20 ( 1.39%)  18 ( 1.47%)    50 ( 0.36%)  14 ( 2.34%)  14 ( 2.47%)  ???:_dl_start
   562 ( 0.38%) 18 ( 1.70%) 18 ( 1.72%)   138 ( 0.40%)  22 ( 1.53%)  22 ( 1.79%)    38 ( 0.28%)   4 ( 0.67%)   4 ( 0.71%)  ???:open_verify.constprop.0
   549 ( 0.37%)  4 ( 0.38%)  4 ( 0.38%)   105 ( 0.30%)   1 ( 0.07%)   1 ( 0.08%)   105 ( 0.77%)   0            0           ???:rtld_malloc
   548 ( 0.37%)  4 ( 0.38%)  4 ( 0.38%)    90 ( 0.26%)   0            0            145 ( 1.06%)   1 ( 0.17%)   1 ( 0.18%)  ???:handle_intel.constprop.0
   534 ( 0.36%)  8 ( 0.75%)  7 ( 0.67%)    14 ( 0.04%)   0            0            222 ( 1.62%)  50 ( 8.36%)  50 ( 8.83%)  ???:memset
   510 ( 0.34%) 17 ( 1.60%) 16 ( 1.53%)   138 ( 0.40%)  21 ( 1.46%)  19 ( 1.55%)    45 ( 0.33%)   5 ( 0.84%)   5 ( 0.88%)  ???:_dl_sysdep_start
   495 ( 0.33%)  3 ( 0.28%)  3 ( 0.29%)    96 ( 0.28%)  24 ( 1.67%)  11 ( 0.90%)    24 ( 0.17%)   0            0           ???:__tunable_get_val
   425 ( 0.29%) 21 ( 1.98%) 21 ( 2.01%)    90 ( 0.26%)   0            0             70 ( 0.51%)   7 ( 1.17%)   7 ( 1.24%)  ???:_dl_map_object
   424 ( 0.29%)  2 ( 0.19%)  2 ( 0.19%)   149 ( 0.43%)   0            0              1 ( 0.01%)   0            0           ???:_dl_next_ld_env_entry
   415 ( 0.28%) 18 ( 1.70%) 18 ( 1.72%)    66 ( 0.19%)   1 ( 0.07%)   0             74 ( 0.54%)   1 ( 0.17%)   1 ( 0.18%)  ???:_int_malloc
   415 ( 0.28%)  3 ( 0.28%)  3 ( 0.29%)   103 ( 0.30%)   0            0             60 ( 0.44%)   1 ( 0.17%)   1 ( 0.18%)  ???:_dl_name_match_p
   395 ( 0.27%)  5 ( 0.47%)  5 ( 0.48%)    52 ( 0.15%)   2 ( 0.14%)   2 ( 0.16%)     0            0            0           ???:index
   390 ( 0.26%)  4 ( 0.38%)  4 ( 0.38%)    90 ( 0.26%)   1 ( 0.07%)   1 ( 0.08%)    69 ( 0.50%)   1 ( 0.17%)   1 ( 0.18%)  ???:_dl_hwcaps_split
   357 ( 0.24%) 15 ( 1.42%)  9 ( 0.86%)   105 ( 0.30%)   0            0             52 ( 0.38%)   0            0           ???:_dl_sort_maps
   353 ( 0.24%)  3 ( 0.28%)  3 ( 0.29%)     9 ( 0.03%)   0            0            321 ( 2.34%)  41 ( 6.86%)  41 ( 7.24%)  ???:_dl_allocate_tls_storage
   341 ( 0.23%)  4 ( 0.38%)  4 ( 0.38%)    48 ( 0.14%)   4 ( 0.28%)   4 ( 0.33%)     0            0            0           ???:strlen
   323 ( 0.22%) 34 ( 3.21%) 34 ( 3.26%)    48 ( 0.14%)   1 ( 0.07%)   1 ( 0.08%)   103 ( 0.75%)   4 ( 0.67%)   4 ( 0.71%)  ???:init_cpu_features.constprop.0
   306 ( 0.21%) 14 ( 1.32%) 14 ( 1.34%)    54 ( 0.16%)  10 ( 0.70%)  10 ( 0.81%)    33 ( 0.24%)   0            0           ???:search_cache
   270 ( 0.18%) 12 ( 1.13%) 12 ( 1.15%)    80 ( 0.23%)   5 ( 0.35%)   0             30 ( 0.22%)   0            0           ???:_dl_fini
   262 ( 0.18%)  4 ( 0.38%)  4 ( 0.38%)    70 ( 0.20%)   3 ( 0.21%)   2 ( 0.16%)    49 ( 0.36%)   9 ( 1.51%)   9 ( 1.59%)  ???:memcpy
   240 ( 0.16%)  2 ( 0.19%)  2 ( 0.19%)    36 ( 0.10%)   0            0             24 ( 0.17%)   1 ( 0.17%)   1 ( 0.18%)  ???:mmap
   227 ( 0.15%)  4 ( 0.38%)  4 ( 0.38%)   103 ( 0.30%)   2 ( 0.14%)   2 ( 0.16%)    34 ( 0.25%)   4 ( 0.67%)   4 ( 0.71%)  ???:strcspn
   222 ( 0.15%) 12 ( 1.13%) 12 ( 1.15%)    21 ( 0.06%)   0            0             15 ( 0.11%)   0            0           ???:get_common_cache_info
   220 ( 0.15%)  4 ( 0.38%)  4 ( 0.38%)    35 ( 0.10%)   0            0             20 ( 0.15%)   0            0           ???:__GI___tunable_set_val
   194 ( 0.13%)  6 ( 0.57%)  6 ( 0.57%)    49 ( 0.14%)   0            0             35 ( 0.26%)   1 ( 0.17%)   1 ( 0.18%)  ???:_IO_file_overflow@@GLIBC_2.2.5
   184 ( 0.12%)  3 ( 0.28%)  3 ( 0.29%)    64 ( 0.18%)   1 ( 0.07%)   0             40 ( 0.29%)   0            0           ???:lookup_malloc_symbol
   176 ( 0.12%)  1 ( 0.09%)  1 ( 0.10%)    34 ( 0.10%)   0            0             34 ( 0.25%)   0            0           ???:_dl_hwcaps_split_masked
   168 ( 0.11%) 16 ( 1.51%) 16 ( 1.53%)    36 ( 0.10%)   1 ( 0.07%)   1 ( 0.08%)    25 ( 0.18%)   2 ( 0.33%)   2 ( 0.35%)  ???:update_usable.constprop.0
   162 ( 0.11%)  6 ( 0.57%)  6 ( 0.57%)    58 ( 0.17%)   0            0             12 ( 0.09%)   0            0           ???:_dl_fixup
   160 ( 0.11%)  4 ( 0.38%)  4 ( 0.38%)    58 ( 0.17%)   8 ( 0.56%)   0             28 ( 0.20%)   0            0           ???:call_init.part.0
   149 ( 0.10%) 19 ( 1.79%) 17 ( 1.63%)    50 ( 0.14%)   3 ( 0.21%)   0             15 ( 0.11%)   1 ( 0.17%)   1 ( 0.18%)  ???:???

</pre>
</div>
</div>
</div>

<div id="outline-container-orge303dcc" class="outline-2">
<h2 id="orge303dcc"><span class="section-number-2">6</span> Massif</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">
<pre class="src src-shell">$ valgrind --tool=massif --time-unit=B ./val
==<span style="color: #ffa724;">4484</span>== Massif, a heap profiler
==<span style="color: #ffa724;">4484</span>== Copyright (C) 2003-2017, and GNU GPL<span style="color: #f4cf86;">'d, by Nicholas Nethercote</span>
<span style="color: #f4cf86;">==4484== Using Valgrind-3.16.1 and LibVEX; rerun with -h for copyright info</span>
<span style="color: #f4cf86;">==4484== Command: ./val</span>
<span style="color: #f4cf86;">==4484== </span>
<span style="color: #f4cf86;">==4484==</span>
</pre>
</div>

<p>
It will generate a file nammed <b>massif.out.pid</b>.
</p>

<div class="org-src-container">
<pre class="src src-shell">$ ms_print massif.out.4484 
--------------------------------------------------------------------------------
Command:            ./val
Massif arguments:   --time-unit=B
ms_print arguments: massif.out.4484
--------------------------------------------------------------------------------


     B
   40^                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
     |                                                                       :
   0 +-----------------------------------------------------------------------&gt;B
     0                                                                      40

Number of snapshots: 2
 Detailed snapshots: []

--------------------------------------------------------------------------------
  n        time(B)         total(B)   useful-heap(B) extra-heap(B)    stacks(B)
--------------------------------------------------------------------------------
  0              0                0                0             0            0
  1             40               40               20            20            0
</pre>
</div>
</div>
</div>

<div id="outline-container-orge0cbe9c" class="outline-2">
<h2 id="orge0cbe9c"><span class="section-number-2">7</span> Callgrind</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">
<pre class="src src-shell">$ valgrind --tool=callgrind ./val 
==<span style="color: #ffa724;">5359</span>== Callgrind, a call-graph generating cache profiler
==<span style="color: #ffa724;">5359</span>== Copyright (C) 2002-2017, and GNU GPL<span style="color: #f4cf86;">'d, by Josef Weidendorfer et al.</span>
<span style="color: #f4cf86;">==5359== Using Valgrind-3.16.1 and LibVEX; rerun with -h for copyright info</span>
<span style="color: #f4cf86;">==5359== Command: ./val</span>
<span style="color: #f4cf86;">==5359== </span>
<span style="color: #f4cf86;">==5359== For interactive control, run '</span>callgrind_control -h<span style="color: #f4cf86;">'.</span>
<span style="color: #f4cf86;">==5359== </span>
<span style="color: #f4cf86;">==5359== Events    : Ir</span>
<span style="color: #f4cf86;">==5359== Collected : 145198</span>
<span style="color: #f4cf86;">==5359== </span>
<span style="color: #f4cf86;">==5359== I   refs:      145,198</span>
</pre>
</div>

<p>
It will generate a file nammed <b>callgrind.out.pid</b>
</p>

<pre class="example">
$ callgrind_annotate callgrind.out.5359 
--------------------------------------------------------------------------------
Profile data file 'callgrind.out.5359' (creator: callgrind-3.16.1)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 31331
Trigger: Program termination
Profiled target:  ./val (PID 5359, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
146,655 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir               file:function
--------------------------------------------------------------------------------
29,561 (20.16%)  ???:_dl_relocate_object [/usr/lib/ld-2.33.so]
27,191 (18.54%)  ???:__GI___tunables_init [/usr/lib/ld-2.33.so]
25,828 (17.61%)  ???:do_lookup_x [/usr/lib/ld-2.33.so]
21,433 (14.61%)  ???:_dl_lookup_symbol_x [/usr/lib/ld-2.33.so]
 7,019 ( 4.79%)  ???:strcmp [/usr/lib/libc-2.33.so]
 5,365 ( 3.66%)  ???:check_match [/usr/lib/ld-2.33.so]
 4,972 ( 3.39%)  ???:intel_check_word.constprop.0 [/usr/lib/ld-2.33.so]
 2,502 ( 1.71%)  ???:_dl_map_object_from_fd [/usr/lib/ld-2.33.so]
 1,683 ( 1.15%)  ???:_dl_check_map_versions [/usr/lib/ld-2.33.so]
 1,558 ( 1.06%)  ???:dl_main [/usr/lib/ld-2.33.so]
   958 ( 0.65%)  ???:_dl_map_object_deps [/usr/lib/ld-2.33.so]
   916 ( 0.62%)  ???:_dl_cache_libcmp [/usr/lib/ld-2.33.so]
   713 ( 0.49%)  ???:ptmalloc_init.part.0 [/usr/lib/libc-2.33.so]
   712 ( 0.49%)  ???:_dl_important_hwcaps [/usr/lib/ld-2.33.so]
   669 ( 0.46%)  ???:_dl_new_object [/usr/lib/ld-2.33.so]
   628 ( 0.43%)  ???:_dl_start [/usr/lib/ld-2.33.so]
   562 ( 0.38%)  ???:open_verify.constprop.0 [/usr/lib/ld-2.33.so]
   548 ( 0.37%)  ???:handle_intel.constprop.0 [/usr/lib/ld-2.33.so]
   545 ( 0.37%)  ???:rtld_malloc [/usr/lib/ld-2.33.so]
   532 ( 0.36%)  ???:memset [/usr/lib/libc-2.33.so]
   510 ( 0.35%)  ???:_dl_sysdep_start [/usr/lib/ld-2.33.so]
   495 ( 0.34%)  ???:__tunable_get_val [/usr/lib/ld-2.33.so]
   425 ( 0.29%)  ???:_dl_map_object [/usr/lib/ld-2.33.so]
   424 ( 0.29%)  ???:_dl_next_ld_env_entry [/usr/lib/ld-2.33.so]
   415 ( 0.28%)  ???:_dl_name_match_p [/usr/lib/ld-2.33.so]
   415 ( 0.28%)  ???:_int_malloc [/usr/lib/libc-2.33.so]
   395 ( 0.27%)  ???:index [/usr/lib/libc-2.33.so]
   390 ( 0.27%)  ???:_dl_hwcaps_split [/usr/lib/ld-2.33.so]
   357 ( 0.24%)  ???:_dl_sort_maps [/usr/lib/ld-2.33.so]
   353 ( 0.24%)  ???:_dl_allocate_tls_storage [/usr/lib/ld-2.33.so]
   341 ( 0.23%)  ???:strlen [/usr/lib/libc-2.33.so]
   323 ( 0.22%)  ???:init_cpu_features.constprop.0 [/usr/lib/ld-2.33.so]
   303 ( 0.21%)  ???:search_cache [/usr/lib/ld-2.33.so]
   268 ( 0.18%)  ???:_dl_fini [/usr/lib/ld-2.33.so]
   227 ( 0.15%)  ???:strcspn [/usr/lib/libc-2.33.so]
   226 ( 0.15%)  ???:mmap [/usr/lib/ld-2.33.so]
   220 ( 0.15%)  ???:__GI___tunable_set_val [/usr/lib/ld-2.33.so]
   218 ( 0.15%)  ???:get_common_cache_info [/usr/lib/ld-2.33.so]
   194 ( 0.13%)  ???:_IO_file_overflow@@GLIBC_2.2.5 [/usr/lib/libc-2.33.so]
   184 ( 0.13%)  ???:lookup_malloc_symbol [/usr/lib/ld-2.33.so]
   176 ( 0.12%)  ???:_dl_hwcaps_split_masked [/usr/lib/ld-2.33.so]
   166 ( 0.11%)  ???:update_usable.constprop.0 [/usr/lib/ld-2.33.so]
   162 ( 0.11%)  ???:_dl_fixup [/usr/lib/ld-2.33.so]
   160 ( 0.11%)  ???:call_init.part.0 [/usr/lib/ld-2.33.so]
   159 ( 0.11%)  ???:memcpy [/usr/lib/ld-2.33.so]
   155 ( 0.11%)  ???:mempcpy [/usr/lib/libc-2.33.so]
   148 ( 0.10%)  ???:_IO_cleanup [/usr/lib/libc-2.33.so]
   148 ( 0.10%)  ???:sysmalloc [/usr/lib/libc-2.33.so]
   118 ( 0.08%)  ???:__cxa_finalize [/usr/lib/libc-2.33.so]
   118 ( 0.08%)  ???:__rtld_malloc_init_real [/usr/lib/ld-2.33.so]
   114 ( 0.08%)  ???:tcache_init.part.0 [/usr/lib/libc-2.33.so]
   111 ( 0.08%)  ???:_IO_flush_all_lockp [/usr/lib/libc-2.33.so]
   109 ( 0.07%)  ???:_dl_add_to_namespace_list [/usr/lib/ld-2.33.so]
   108 ( 0.07%)  ???:_dl_catch_exception [/usr/lib/ld-2.33.so]
   101 ( 0.07%)  ???:_dl_init [/usr/lib/ld-2.33.so]
    98 ( 0.07%)  ???:__run_exit_handlers [/usr/lib/libc-2.33.so]
    96 ( 0.07%)  ???:_dl_setup_hash [/usr/lib/ld-2.33.so]
    95 ( 0.06%)  ???:_dl_discover_osversion [/usr/lib/ld-2.33.so]
    94 ( 0.06%)  ???:__sigsetjmp [/usr/lib/libc-2.33.so]
    91 ( 0.06%)  ???:_IO_default_xsputn [/usr/lib/libc-2.33.so]
    87 ( 0.06%)  ???:_dl_allocate_tls_init [/usr/lib/ld-2.33.so]
    87 ( 0.06%)  ???:init_tls [/usr/lib/ld-2.33.so]
    82 ( 0.06%)  ???:_dl_runtime_resolve_xsave [/usr/lib/ld-2.33.so]
    80 ( 0.05%)  ???:_dl_init_paths [/usr/lib/ld-2.33.so]
    80 ( 0.05%)  ???:_dl_protect_relro [/usr/lib/ld-2.33.so]
    76 ( 0.05%)  ???:_dl_load_cache_lookup [/usr/lib/ld-2.33.so]
    75 ( 0.05%)  ???:puts [/usr/lib/libc-2.33.so]
    74 ( 0.05%)  ???:_dl_determine_tlsoffset [/usr/lib/ld-2.33.so]
    72 ( 0.05%)  ???:_dl_check_all_versions [/usr/lib/ld-2.33.so]
    72 ( 0.05%)  ???:rtld_calloc [/usr/lib/ld-2.33.so]
    66 ( 0.05%)  ???:_IO_file_xsputn@@GLIBC_2.2.5 [/usr/lib/libc-2.33.so]
    65 ( 0.04%)  ???:copy_hwcaps [/usr/lib/ld-2.33.so]
    64 ( 0.04%)  ???:_dl_lookup_direct [/usr/lib/ld-2.33.so]
    64 ( 0.04%)  ???:sbrk [/usr/lib/libc-2.33.so]
    63 ( 0.04%)  ???:_IO_file_doallocate [/usr/lib/libc-2.33.so]
    63 ( 0.04%)  ???:_dl_process_pt_gnu_property [/usr/lib/ld-2.33.so]
    61 ( 0.04%)  ???:malloc [/usr/lib/libc-2.33.so]
    60 ( 0.04%)  ???:get_common_indices.constprop.0 [/usr/lib/ld-2.33.so]
    57 ( 0.04%)  ???:__open_nocancel [/usr/lib/ld-2.33.so]
    56 ( 0.04%)  ???:new_do_write [/usr/lib/libc-2.33.so]
    55 ( 0.04%)  ???:malloc'2 [/usr/lib/libc-2.33.so]
    54 ( 0.04%)  ???:(below main) [/usr/lib/libc-2.33.so]
    54 ( 0.04%)  ???:_dl_dst_count [/usr/lib/ld-2.33.so]
    53 ( 0.04%)  ???:handle_preload_list [/usr/lib/ld-2.33.so]
    51 ( 0.03%)  ???:_IO_default_setbuf [/usr/lib/libc-2.33.so]
    45 ( 0.03%)  ???:_dl_debug_initialize [/usr/lib/ld-2.33.so]
    42 ( 0.03%)  ???:_dl_sysdep_read_whole_file [/usr/lib/ld-2.33.so]
    40 ( 0.03%)  ???:__internal_atexit [/usr/lib/libc-2.33.so]
    38 ( 0.03%)  ???:_dl_hwcaps_subdirs_active [/usr/lib/ld-2.33.so]
    37 ( 0.03%)  ???:_IO_file_write@@GLIBC_2.2.5 [/usr/lib/libc-2.33.so]
    36 ( 0.02%)  ???:__libc_scratch_buffer_set_array_size [/usr/lib/ld-2.33.so]
    36 ( 0.02%)  ???:_dl_tls_static_surplus_init [/usr/lib/ld-2.33.so]
    36 ( 0.02%)  ???:openaux [/usr/lib/ld-2.33.so]
    36 ( 0.02%)  ???:strdup [/usr/lib/ld-2.33.so]
    34 ( 0.02%)  ???:__libc_csu_init [/home/sholde/dev/perso/Sholde.github.io/secret/val]
    34 ( 0.02%)  ???:__strrchr_avx2 [/usr/lib/libc-2.33.so]

</pre>
</div>
</div>
</div>
</body>
</html>
